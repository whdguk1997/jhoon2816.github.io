---
title: Node.js
layout: post
icon: fa-lightbulb
icon-style: regular
---
<!-- Text stuff -->
<h2> 쿠키, 세션, 멀터 Middleware() </h2>
<hr/>
<h3>Cookie,Session,Multer 부가설명입니다.</h3>
<hr/>
<div>
    <p>먼저 쿠키나 세션을 사용하는 목적은 사용자가 로그인한 상태인지 아닌지를 확인하고 싶을때 사용합니다.
    <br/>쿠키는 웹 브라우저에 저장되는 정보이며, 세션은 웹 서버에 저장되는 정보입니다.</p>
</div>
<hr/>
<div>
    <p> 쿠키를 설정,확인 하기 위해 먼저 'cookie-parser' 라는 미들웨어를 사용합니다.
        지금부터 '웹 브라우저' 를 간단히 '브라우저' 이라 칭하겠습니다.
        그리고 '웹 서버' 는 '서버'라 하겠습니다.
    </p>

    <p> 쿠키의 설정 후 보여주는 과정은 이렇게됩니다.<br/>
        1. '브라우저' 에서 저희가 사이트를 켜달라고 요청을 합니다.(localhost:3000/process/setUserCookie<br/>
        2. 사이트 요청을 받은 '서버'는 라우터를 통해 /process/setUserCookie 패스를 처리합니다.<br/>
        3. /process/setUserCookie 패스를 처리하는 함수에서 cookie()메소드를 통해 쿠키를 추가합니다.<br/>
        4. direct()를 통해 /process/showCookie 경로를 요청합니다.<br/>
        3. 위에서 불러온 정보는 그대로 '브라우저'에서 표시가 됩니다.<br/>
    </p>
</div>
<hr/>
<div>
    <p>이제는 세션입니다. 세션도 상태정보를 저장하지만 쿠키와는 다르게 서버에 저장됩니다.
       세션이 쓰이는 대표적인 예시는 로그인을 할떄 저장되는 세션입니다.</p>
    <p>
        세션의 과정입니다. <br/>
        1. 사용자가 상품정보를 '서버'에 요청 <br/>
        2. /process/product 로 요청하여 웹서버에서 그 안에 user라는 세션이 있는지 확인 <br/>
        3. 이미 저장되어있다면, /public/product.html 파일을 응답으로 전송 <br/>
        4. 없다면 로그인을 유도하기 위해 로그인페이지로 가는데, redirect()메소드를 이용하여 /public/login2.html 로 이동. <br/>
    </p>
</div>
<hr/>
<div>
    <p> 마지막으로 Multer 미들웨어입니다.<br/>
        멀터 미들웨어는 파일업로드를 하기 위해 사용하는 미들웨어입니다.
        파일을 업로드 할때에는 POST 방식으로 데이터를 전송하기에 body-parser 미들웨어와 같이 사용합니다.
        <strong>미들웨어 사용시 순서가 바뀌면 작동을 안할 수 있습니다.</strong>
    </p>
    <p>
        파일 업로드 프로세스<br/>
        1. '브라우저' 에서 이미지 선택 후 [업로드]를 눌러 '서버' 로 요청한다.<br/>
        2. multer 미들웨어를 거쳐 라우팅 함수로 전달되는데 이 함수가 파일이름을 변경하고, uploads폴더에 저장.<br/>
        3. 확인된 정보는 응답으로 보내지고, 웹 브라우저에서 조회하는 문서로 업로드 결과를 볼수있음.</p>
    </p>
</div>
<hr/>
<div>
    <p> * get() 메소드와 Post() 메소드의 차이점 <br/>
        구조적으로 봤을때 HTTP 요청 포맷 (request, respond)을 보면 Header 와 Body 부분으로 나뉩니다.<br/>
        Header에 요청정보를 넣으면 get,Body에 요청정를 넣으면 Post로 보냅니다.<br/>
        기능적으로 요청을 보내는것은 같지만, 보안 or 파일정보전송등에는 Post를 씁니다.
    </p>
    <p>
        * cors 모듈 : 다중서버 접속 지원을 하기 위해 사용하는 모듈.
        보통 브라우저에서 로딩된 웹페이지는 페이지가 로딩된 서버에서만 접근가능하지만, 이 기능은 그 이외의 서버에서도 접근을 가능하게함.
    </p>
    <hr/>
</div>



